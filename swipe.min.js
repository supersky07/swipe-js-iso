!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():a.Swipe=b()}(this,function(){"use strict";return function(a,b){function c(){s=w.children[0].children,v=s.length,s.length<2&&(b.continuous=!1),t=new Array(s.length),u=a.getBoundingClientRect().width||a.offsetWidth,a.style.visibility="visible"}function d(){g(y-1)}function e(){g(y+1)}function f(a){return 0>a&&(a=v-1),a>=v&&(a=0),a}function g(a,c,d){if(y!=a){d=d||!0,a=f(a),i(x,b.sliderData[a].title);var e=[f(a+(d?-1:1)),a,f(a+(d?1:-1))];if(r.transitions){h(e[0],b.imgPosition.left,z),h(e[1],b.imgPosition.current,z),h(e[2],b.imgPosition.right,z);for(var g=0;v>g;g++)e.indexOf(g)<0&&parseFloat(s[g].style.left)!==b.imgPosition.none.left&&h(g,b.imgPosition.none,z)}y=a,C=b.auto||0,o||j(),b.callback&&b.callback(y)}}function h(a,b,c){var d=s[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransitionProperty=e.transitionProperty="all",e.left=b.left+"px",e.top=b.top+"px",e.width=b.width+"px",e.height=b.height+"px",e.zIndex=b.zIndex,e.opacity=b.opacity)}function i(a,b){if(a){b=b||a.innerHTML,a.style.opacity=0;var c=setTimeout(function(){a.innerHTML=b,a.style.opacity=1,clearTimeout(c)},200)}}function j(){clearTimeout(A),A=setTimeout(e,3e3)}function k(){C=0,clearTimeout(A)}function l(){b.callback&&b.callback(y,!0)}var m=!1,n=!0,o=!1,p=function(){},q=function(a){setTimeout(a||p,0)},r={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a){var s,t,u,v,w=a.children[0],x=a.children[1];b=b||{};var y=parseInt(b.startSlide,10)||0,z=b.speed||300;b.continuous=void 0!==b.continuous?b.continuous:!0;var A,B,C=b.auto||0,D={},E={},F={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":q(this.end(a));break;case"resize":q(l)}b.stopPropagation&&a.stopPropagation()},start:function(c){m=!1,b.isInSlider(!0);var d=c.touches[0];k(),D={x:d.pageX,y:d.pageY,time:+new Date},B=void 0,E={},a.addEventListener("touchmove",this,!1),a.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];if(E={x:c.pageX-D.x,y:c.pageY-D.y},n){var d=c.clientX-D.x,e=c.clientY-D.y;m=Math.abs(d)<Math.abs(e)?!0:!1,n=!1}m||("undefined"==typeof B&&(B=!!(B||Math.abs(E.x)<Math.abs(E.y))),B||(a.preventDefault(),k()))}},end:function(c){if(b.isInSlider(!1),!m){var f=+new Date-D.time,g=Number(f)<250&&Math.abs(E.x)>20||Math.abs(E.x)>u/10,h=!y&&E.x>0||y==s.length-1&&E.x<0;b.continuous&&(h=!1);var i=E.x<0;if(C=b.auto||0,!E.x&&!E.y){var k=s[y].getAttribute("data-href");k&&window.location.replace(k)}B||(g&&!h?i?e():d():j()),(B===!0||void 0===B)&&j(),a.removeEventListener("touchmove",F,!1),a.removeEventListener("touchend",F,!1)}}};return c(),j(),r.addEventListener?(r.touch&&a.addEventListener("touchstart",F,!1),window.addEventListener("resize",F,!1)):window.onresize=function(){c()},{setup:function(){o=!1,c()},slide:function(a,b){k(),g(a,b)},prev:function(){k(),d()},next:function(){k(),e()},stop:function(){k()},getPos:function(){return y},getNumSlides:function(){return v},kill:function(){k(),o=!0,r.addEventListener?(a.removeEventListener("touchstart",F,!1),window.removeEventListener("resize",F,!1)):window.onresize=null}}}}});